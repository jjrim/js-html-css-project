<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Main Page</title>

    <!-- Making sure it's mobile friendly -->
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <!-- <link rel="stylesheet" type="text/css" href="style.css"> -->


<div style="background:rgb(112, 10, 10)">
            <ul class="nav nav-tabs">
                    <li class="nav-item">
                      <a class="nav-link active" href="signedin.html">Homepage</a>
                    </li>
                    <li class="nav-item dropdown pill-color">
                      <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="false">Find your restaurant</a>
                      <div class="dropdown-menu">
                        <a class="dropdown-item" href="searchbylocation.html">By location</a>
                        <a class="dropdown-item" href="searchbyname.html">By name</a>
                        <a class="dropdown-item" href="searchallrestaurants.html">See all restaurants</a>
                        <div class="dropdown-divider"></div>
                        <a class="dropdown-item" href="reservation.html">Reserve a table</a>
                      </div>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link pill-color" href="syncyourtable.html">Sync your table</a>
                    </li>
                    <li class="nav-item">
                            <a class="nav-link active" href="login.html">Sign in</a>
                          </li>
                  </ul>

                </div>

</head>
<body>

<div class="outer">
        <h1>Welcome</h1>
    <h2>to the</h2>
    <h1>J Bros Restaurant App</h1>
</div>
<div class="outer"><div class="sphere"><p>Stop waiting for waiters</p></div></div>
<div class="outer"><a href="login.html"><div class=signinbutton><p class="signin">sign in</p></div></a></div>
</div>

<div class="outer">
    <a href="restaurants.html">
        <div class=signinbutton>
            <p class="signin">Find a restaurant</p>
        </div>
    </a>
</div>


 <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <h1>Welcome to Jbros Restaurant app</h1>
    <div id="firebaseui-auth-container"></div>
    <div id="loader">Loading...</div>
  <!-- 
    <h1>let's read from database: <span id=data>....</span></h1> -->
  
  
  
  
  <script src="https://www.gstatic.com/firebasejs/7.2.2/firebase-app.js"></script>
  
  <!-- TODO: Add SDKs for Firebase products that you want to use
       https://firebase.google.com/docs/web/setup#available-libraries -->
  <script src="https://www.gstatic.com/firebasejs/7.2.2/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-firestore.js"></script>
  
  <script>
    // Your web app's Firebase configuration
    var firebaseConfig = {
      apiKey: "AIzaSyCENQ_98AjAccmfXsB2Kzfy-D_V3QvkN-M",
      authDomain: "project-authentication-f841b.firebaseapp.com",
      databaseURL: "https://project-authentication-f841b.firebaseio.com",
      projectId: "project-authentication-f841b",
      storageBucket: "project-authentication-f841b.appspot.com",
      messagingSenderId: "541548160482",
      appId: "1:541548160482:web:91a33581cbdf8b6048c5bb"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
  </script>
  
  <script src="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.js"></script>
  <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.css" />
  
  <script>
    // Initialize the FirebaseUI Widget using Firebase.
    var ui = new firebaseui.auth.AuthUI(firebase.auth());
    // initialize firebase
    var db = firebase.firestore();
  </script>
  
  
  
  <script>
    var uiConfig = {
    callbacks: {
      signInSuccessWithAuthResult: function(authResult, redirectUrl) {
        // User successfully signed in.
        // Return type determines whether we continue the redirect automatically
        // or whether we leave that to developer to handle.
        return true;
      },
      uiShown: function() {
        // The widget is rendered.
        // Hide the loader.
        document.getElementById('loader').style.display = 'none';
      }
    },
    // Will use popup for IDP Providers sign-in flow instead of the default, redirect.
    signInFlow: 'popup',
    signInSuccessUrl: '<url-to-redirect-to-on-success>',
    signInOptions: [
      // Leave the lines as is for the providers you want to offer your users.
      firebase.auth.EmailAuthProvider.PROVIDER_ID
    ],
    // Terms of service url.
    tosUrl: '<your-tos-url>',
    // Privacy policy url.
    privacyPolicyUrl: '<your-privacy-policy-url>'
  };
    // The start method will wait until the DOM is loaded.
  ui.start('#firebaseui-auth-container', uiConfig);
  </script>
  
  <h1>Your table total: $<span id=data>...</span></h1>
  <form id="ReservationForm"action>
    <div>
      <label for="name">Name:</label>
      <input type="text" id="name" name="name"><br>
  
      <label for="guests">Number of guests:</label>
      <input type="text" id="guests" name="guests"><br>
  
      <label for="time">Time: </label>
      <input id="time" type="time" name="appt-time"><br>
  
      <label for="name">Date:</label>
      <input type="text" id="date" data-format="DD-MM-YYYY" data-template="D MMM YYYY" name="date" value="09-01-2013"><br>
  
      <br><input type="submit" value="Submit">
    <div>
  <script>
    let winePrice = db.collection("Menu").doc("Menu_Cactus").collection("Menu").doc("Drink").get().then(function (e) {
        document.getElementById("data").innerHTML = e.data().Sake + e.data().Wine}); 
      document.getElementById('ReservationForm').addEventListener('submit', processReservation)
        function processReservation(e) {
          e.preventDefault();
          let reservationName = document.getElementById('name').value
          let reservationGuests = document.getElementById('guests').value
          let reservationDate = document.getElementById('date').value
          let reservationTime = document.getElementById('time').value
          db.collection("Restaurants").doc("CactusBurnarby").collection("Reservations").add({
          Guests: reservationGuests,
          Name: reservationName,
          Time: reservationTime,
          Date: reservationDate,
      })
    }
      </script>


  </body>


</html>